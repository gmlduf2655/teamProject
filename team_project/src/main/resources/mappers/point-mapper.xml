<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kh.team.mappers.point">
	
	<!-- 포인트 내역 추가 -->
	<insert id="insertPoint">
		insert into 
			tbl_point(pointno, point, userno, point_code)
		values
			(seq_point_pointno.nextval, #{point}, #{userno}, #{point_code})
	</insert>
	
	<!-- 포인트 코드 추가 -->
	<insert id="insertPointCode">
		insert into 
			tbl_point_code(point_code, point, point_name, point_desc)
		values
			(#{point_code}, #{point}, #{point_name}, #{point_desc, jdbcType=VARCHAR})		
	</insert>

	<!-- 포인트 목록 조회 -->
	<select id="selectPointList" resultType="PointVo">
		select pointno, a.point, userno, b.point_code, b.point_name, b.point_desc
		from tbl_point a, tbl_point_code b
		where a.point_code = b.point_code
	</select>
	
	<!-- 아이디로 포인트 목록조회 -->
	<select id="selectPointListByUserno" resultType="PointVo">
		select pointno, a.point, userno, point_date, b.point_code, b.point_name, b.point_desc
		from tbl_point a, tbl_point_code b
		where a.point_code = b.point_code
		and a.userno = #{userno}		
	</select>
	
	<!-- 포인트 코드로 포인트 목록조회 -->
	<select id="selectPointListByPointCode" resultType="PointVo">
		select pointno, a.point, userno, point_date, b.point_code, b.point_name, b.point_desc
		from tbl_point a, tbl_point_code b
		where a.point_code = b.point_code
		and a.point_code = #{point_code}		
	</select>	

	<!--  포인트 번호로 포인트 내역조회 -->
	<select id="selectPointByPointno" resultType="PointVo">
		select pointno, a.point, userno, point_date, b.point_code, b.point_name, b.point_desc
		from tbl_point a, tbl_point_code b
		where a.point_code = b.point_code
		and a.pointno = #{pointno}		
	</select>
	
	<!-- 포인트 내역 삭제 -->
	<delete id="deletePoint">
		delete from tbl_point
		where pointno= #{pointno}
	</delete>
	
	<!-- 포인트코드 내역 삭제 -->
	<delete id="deletePointCode">
		delete from tbl_point_code
		where point_code= #{point_code}
	</delete>
</mapper>